

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Quickstart - McCoy  documentation</title>
      
    
    
      <link rel="stylesheet" href="_static/stylesheets/main.a280224b.min.css">
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#install-mccoy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="McCoy  documentation" class="md-header__button md-logo" aria-label="McCoy  documentation" data-md-component="logo">
      <img src="_static/mccoy-logo.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            McCoy  documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quickstart
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mccoy-devs/mccoy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    McCoy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="McCoy  documentation" class="md-nav__button md-logo" aria-label="McCoy  documentation" data-md-component="logo">
      <img src="_static/mccoy-logo.svg" alt="logo">
    </a>
    McCoy  documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mccoy-devs/mccoy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    McCoy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="workflow.html" class="md-nav__link">
        <span class="md-ellipsis">Workflow</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Quickstart</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Quickstart</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Quickstart</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-mccoy" class="md-nav__link">
    <span class="md-ellipsis">Install Mc<wbr>Coy</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-project" class="md-nav__link">
    <span class="md-ellipsis">Create a project</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-your-project" class="md-nav__link">
    <span class="md-ellipsis">Configure your project</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-mccoy-workflow" class="md-nav__link">
    <span class="md-ellipsis">Run the Mc<wbr>Coy workflow</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-results" class="md-nav__link">
    <span class="md-ellipsis">Check the results</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-a-run-with-new-data" class="md-nav__link">
    <span class="md-ellipsis">Updating a run with new data</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="example.html" class="md-nav__link">
        <span class="md-ellipsis">Example</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="hpc.html" class="md-nav__link">
        <span class="md-ellipsis">Running on HPC</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Quickstart</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-mccoy" class="md-nav__link">
    <span class="md-ellipsis">Install Mc<wbr>Coy</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-project" class="md-nav__link">
    <span class="md-ellipsis">Create a project</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-your-project" class="md-nav__link">
    <span class="md-ellipsis">Configure your project</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-mccoy-workflow" class="md-nav__link">
    <span class="md-ellipsis">Run the Mc<wbr>Coy workflow</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-results" class="md-nav__link">
    <span class="md-ellipsis">Check the results</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-a-run-with-new-data" class="md-nav__link">
    <span class="md-ellipsis">Updating a run with new data</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset" role="main">
                


  <h1 id="quickstart">Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This page is under construction!</p>
</div>
<h2 id="install-mccoy">Install McCoy<a class="headerlink" href="#install-mccoy" title="Permalink to this heading">¶</a></h2>
<p>If you haven’t done so yet, install McCoy and <a class="reference external" href="https://github.com/mamba-org/mamba">Mamba</a> following the <a class="reference internal" href="installation.html"><span class="doc">installation</span></a> instructions.</p>
<h2 id="create-a-project">Create a project<a class="headerlink" href="#create-a-project" title="Permalink to this heading">¶</a></h2>
<p>A new project can be created using:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>mccoy create &lt;project_name&gt; <span class="se">\</span>
    --reference &lt;reference_fasta_file&gt; <span class="se">\</span>
    --template &lt;beast2_template_file&gt;
</code></pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;project_name&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_fasta_file&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;beast2_template_file&gt;</span></code> are replaced appropriately.</p>
<p>A new directory will be created with the following contents:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>├── config.yaml            <span class="c1"># &lt;- A configuration file, used to tweak the</span>
│                          <span class="c1">#    parameters of each step in the pipeline</span>
├── resources
│   ├── reference.fasta    <span class="c1"># &lt;- Copy of the reference genome</span>
│   └── template.xml       <span class="c1"># &lt;- Copy of the Beast2 template</span>
│
├── runs                   <span class="c1"># &lt;- An empty directory where runs will be stored</span>
└── tests.py               <span class="c1"># &lt;- Bare-bones quality control test suite</span>
</code></pre></div>
</div>
<h2 id="configure-your-project">Configure your project<a class="headerlink" href="#configure-your-project" title="Permalink to this heading">¶</a></h2>
<p>Due to the large diversity in possible phylodynamic analyses, you will almost
certainly need to customise the McCoy project to fit your needs.
McCoy has been designed so that as much of that customisation as possible can
be made using the project <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> or command line arguments.</p>
<p>The default config file looks something like this:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption highlight"><span class="caption-text filename">
Config options applied to all workflow rules<a class="headerlink" href="#id3" title="Permalink to this code">¶</a></span></div>
<div class="highlight-yaml notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">all</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># TODO: check this out...</span><span class="w"></span>
<span class="w">  </span><span class="nt">threads_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">64</span><span class="w">                 </span><span class="c1"># If a rule does not have `threads` specified below then **never** use more than this for a single rule, even if more cores are available.</span><span class="w"></span>
<span class="w">  </span><span class="nt">update_default_resources</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class="w">  </span><span class="c1"># Additional default-resources to extend those defined in the profile being used</span><span class="w"></span>
<span class="w"> </span>
<span class="nt">align</span><span class="p">:</span><span class="w">                            </span><span class="c1"># Options for the alignemnt rule</span><span class="w"></span>
<span class="w">  </span><span class="nt">mafft</span><span class="p">:</span><span class="w">                          </span><span class="c1"># Command line options passed directly to mafft</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--6merpair&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--keeplength&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--addfragments&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span><span class="w">                      </span><span class="c1"># Use up to this many threads</span><span class="w"></span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w">                      </span><span class="c1"># Only used for submission to an HPC queue</span><span class="w"></span>
<span class="w">    </span><span class="nt">runtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w">                   </span><span class="c1"># minutes</span><span class="w"></span>
<span class="w">    </span><span class="nt">mem_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span><span class="w"></span>

<span class="nt">tree</span><span class="p">:</span><span class="w">                             </span><span class="c1"># Options for the tree rule</span><span class="w"></span>
<span class="w">  </span><span class="nt">iqtree2</span><span class="p">:</span><span class="w">                        </span><span class="c1"># Command line options passed directly to iqtree2</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-nt</span><span class="nv"> </span><span class="s">AUTO&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-m</span><span class="nv"> </span><span class="s">HKY+G&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-bb</span><span class="nv"> </span><span class="s">1000&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-seed</span><span class="nv"> </span><span class="s">847202098&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w">                     </span><span class="c1"># Use up to this many threads</span><span class="w"></span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w">                      </span><span class="c1"># Only used when called with --cluster</span><span class="w"></span>
<span class="w">    </span><span class="nt">runtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">                   </span><span class="c1"># minutes</span><span class="w"></span>
<span class="w">    </span><span class="nt">mem_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16000</span><span class="w"></span>

<span class="nt">beast</span><span class="p">:</span><span class="w">                            </span><span class="c1"># Options for the beast rule</span><span class="w"></span>
<span class="w">  </span><span class="nt">beast</span><span class="p">:</span><span class="w">                          </span><span class="c1"># Command line options passed directly to beast</span><span class="w"></span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-beagle_SSE&quot;</span><span class="w">              </span><span class="c1"># This will use the SSE extensions in BEAGLE if available</span><span class="w"></span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-seed</span><span class="nv"> </span><span class="s">98202873&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">dynamic</span><span class="p">:</span><span class="w">                        </span><span class="c1"># Values for the dynamic template parameters</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;ePopSize=0.3&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Date.dateFormat=yyyy/MM/dd&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Date.delimiter=_&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;mutationRate=1.0&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;mcmc.chainLength=10000&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;treelog.logEvery=1000&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;tracelog.logEvery=1000&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span><span class="w">                      </span><span class="c1"># Use up to this many threads</span><span class="w"></span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span><span class="w">                      </span><span class="c1"># Only used for submission to an HPC queue</span><span class="w"></span>
<span class="w">    </span><span class="nt">runtimtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1200</span><span class="w">              </span><span class="c1"># minutes</span><span class="w"></span>
<span class="w">    </span><span class="nt">mem_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16000</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
<p>Let’s break down some of the key sections…</p>
<p>The first block is called <code class="docutils literal notranslate"><span class="pre">all</span></code> and applies to all rules in the workflow.
<code class="docutils literal notranslate"><span class="pre">threads_max</span></code> allows setting the absolute maximum number of threads / cores
used by any single rule on a single machine, regardless of what is available.
If you are running on an HPC system and want to make use of nodes with more
than 64 cores then you may want to raise this value.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When discussing “threads” and “cores”, we attempt to remain as close to the
definitions of <a class="reference external" href="https://snakemake.github.io">Snakemake</a> as possible.
However, the Snakemake definitions can be quite confusing and the meaning of
“thread” changes depending on the context (e.g. running on a cluster or
locally). If in doubt, we recommend always treating a “thread” as a physical
cpu-core unless you have a specific reason not to and know what you are
doing. This is the default definition in McCoy.</p>
</div>
<p>When running on an HPC cluster, you can also use <code class="docutils literal notranslate"><span class="pre">update_default_resources</span></code>
to set defaults for the requested resources of all of your jobs. This is very
useful to, for example, set the default account to which your resource usage
will be charged:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">update_default_resources</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">account=&#39;proj00577&#39;</span><span class="w"></span>
</code></pre></div>
</div>
<p>After this, we have one block for each rule of the workflow with config
options: <a class="reference internal" href="alignment.html#rule-align" title="rule-align"><code class="xref smk smk-ref docutils literal notranslate"><span class="pre">align</span></code></a>, <a class="reference internal" href="quality_control.html#rule-tree" title="rule-tree"><code class="xref smk smk-ref docutils literal notranslate"><span class="pre">tree</span></code></a>, and <a class="reference internal" href="beast.html#rule-beast" title="rule-beast"><code class="xref smk smk-ref docutils literal notranslate"><span class="pre">beast</span></code></a>. See the
documentation for each of these rules for information.</p>
<p>One key parameter which you will see repeated is <code class="docutils literal notranslate"><span class="pre">threads</span></code>. When running
locally, this corresponds to the maximum number of CPU cores allocated
(remembering that we will never exceed <code class="docutils literal notranslate"><span class="pre">all.threads_max</span></code>). This value will
automatically be adjusted to the total number of cores available on the machine
if more than that number is requested. When running on an HPC cluster, McCoy
uses <code class="docutils literal notranslate"><span class="pre">threads</span></code> to set the <a class="reference external" href="https://slurm.schedmd.com">SLURM</a> <code class="docutils literal notranslate"><span class="pre">cpus-per-task</span></code> value [<a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>]. For more
information about running McCoy on HPC systems, check out the <a class="reference internal" href="hpc.html"><span class="doc">HPC page</span></a>.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>In other words, we always use threads to set the amount of “shared-memory” parallelism.</p>
</aside>
</aside>
<h2 id="run-the-mccoy-workflow">Run the McCoy workflow<a class="headerlink" href="#run-the-mccoy-workflow" title="Permalink to this heading">¶</a></h2>
<p>Now that your project is configured, it’s time to run the McCoy workflow:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>mccoy run &lt;project_dir&gt; --data &lt;fasta_file&gt;
</code></pre></div>
</div>
<p>All results will be stored in <code class="docutils literal notranslate"><span class="pre">&lt;project_dir&gt;/runs/run_1</span></code>.</p>
<p>To see all of the available options for the <code class="docutils literal notranslate"><span class="pre">mccoy</span> <span class="pre">run</span></code> command use:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>mccoy run --help
</code></pre></div>
</div>
<p>A few notable options include:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--inherit</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">--inherit-last</span></code></dt><dd><p>These will be discussed in the following section.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--config</span></code></dt><dd><p>This allows overriding the values set in the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file.
For example <code class="docutils literal notranslate"><span class="pre">--config='all.update_default_resources=[&quot;account=proj00577&quot;]'</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--hpc</span></code></dt><dd><p>Run McCoy by submitting jobs to an HPC <a class="reference external" href="https://slurm.schedmd.com">SLURM</a> scheduler. See the
<a class="reference internal" href="hpc.html"><span class="doc">Running on HPC</span></a> page for more info.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Any options or arguments not listed in <code class="docutils literal notranslate"><span class="pre">mccoy</span> <span class="pre">run</span> <span class="pre">--help</span></code> are forwarded
on to Snakemake. This provides power-users with the ability to fully tailor
how the workflow runs.</p>
</div>
<h2 id="check-the-results">Check the results<a class="headerlink" href="#check-the-results" title="Permalink to this heading">¶</a></h2>
<p>Upon the successful completion of a run, McCoy will generate an html report
with a number of results and diagnostics from each stage of the workflow.</p>
<img alt="_images/report_example.png" src="_images/report_example.png" />
<h2 id="updating-a-run-with-new-data">Updating a run with new data<a class="headerlink" href="#updating-a-run-with-new-data" title="Permalink to this heading">¶</a></h2>
<p>One of the key features of McCoy is the ability to add new sequences and continue
from the results of a previous run, without starting from scratch. This is
achieved using <a class="reference external" href="https://github.com/Wytamma/online-beast">online-BEAST</a>.</p>
<p>To inherit the results from the last run of McCoy, simply use:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>mccoy run &lt;project_dir&gt; --data &lt;new_sequences_fasta&gt; --inherit-last
</code></pre></div>
</div>
<p>To inherit from a different run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>mccoy run &lt;project_dir&gt; --data &lt;new_sequences_fasta&gt; --inherit &lt;project_dir&gt;/runs/run_&lt;N&gt;
</code></pre></div>
</div>



              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="installation.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="example.html" class="md-footer__link md-footer__link--next" aria-label="Next: Example" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Example
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2022, Wytamma Wirth, Sebastián Duchêne, Simon Mutch, Robert Turnbull.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    5.3.0.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.annotate"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="_static/javascripts/bundle.dc1bded0.min.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    
  </body>
</html>
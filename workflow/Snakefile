from pathlib import Path
from hashlib import shake_256
import yaml

SNAKE_DIR = Path(workflow.basedir)
RESULTS_DIR = SNAKE_DIR.parent / "results"
RESOURCES_DIR = SNAKE_DIR.parent / "resources"
CONFIG_DIR = SNAKE_DIR.parent / "config"
LOG_DIR = SNAKE_DIR.parent / "logs"

configfile: CONFIG_DIR / "config.yml"

envvars:
    "GISAIDR_USERNAME",
    "GISAIDR_PASSWORD"

include: "rules/query.smk"
include: "rules/align.smk"
include: "rules/tree.smk"

rule all:
    input:
        RESULTS_DIR / f"{config['id']}-aligned.fasta.treefile"
